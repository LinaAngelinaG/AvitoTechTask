time="2023-08-26T20:54:03+03:00" level=info msg="create router" func="main.main()" file="app.go:28"
time="2023-08-26T20:54:03+03:00" level=info msg="register user handler" func="main.main()" file="app.go:31"
time="2023-08-26T20:54:03+03:00" level=info msg="start application" func="main.start()" file="app.go:44"
time="2023-08-26T20:54:03+03:00" level=info msg="server is listening port 0.0.0.0:1234" func="main.start()" file="app.go:56"
time="2023-08-27T14:08:31+03:00" level=info msg="create router" func="main.main()" file="app.go:20"
time="2023-08-27T14:08:31+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:23"
time="2023-08-27T14:08:31+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:22"
time="2023-08-27T14:08:31+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:19"
time="2023-08-27T14:08:31+03:00" level=info msg="start application" func="main.start()" file="app.go:37"
time="2023-08-27T14:08:31+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:39"
time="2023-08-27T14:08:31+03:00" level=info msg="server is listening port %s:%s0.0.0.010000" func="main.start()" file="app.go:51"
time="2023-08-27T14:09:32+03:00" level=info msg="create router" func="main.main()" file="app.go:20"
time="2023-08-27T14:09:32+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:23"
time="2023-08-27T14:09:32+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:22"
time="2023-08-27T14:09:32+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:19"
time="2023-08-27T14:09:32+03:00" level=info msg="start application" func="main.start()" file="app.go:37"
time="2023-08-27T14:09:32+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:39"
time="2023-08-27T14:09:32+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:51"
time="2023-08-28T13:51:18+03:00" level=info msg="create router" func="main.main()" file="app.go:22"
time="2023-08-28T13:51:18+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-28T13:51:18+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:22"
time="2023-08-28T13:51:18+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:19"
time="2023-08-28T13:51:18+03:00" level=info msg="start application" func="main.start()" file="app.go:44"
time="2023-08-28T13:51:18+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:46"
time="2023-08-28T13:51:18+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:58"
time="2023-08-28T22:05:33+03:00" level=info msg="create router" func="main.main()" file="app.go:24"
time="2023-08-28T22:05:33+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-28T22:05:33+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:39"
time="2023-08-28T22:05:33+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) RETURNING segment_id, active" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:24"
time="2023-08-28T22:05:33+03:00" level=fatal msg="can't scan into dest[0]: cannot assign 4 into int" func="main.startRepositories()" file="app.go:45"
time="2023-08-28T22:06:45+03:00" level=info msg="create router" func="main.main()" file="app.go:24"
time="2023-08-28T22:06:45+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-28T22:06:45+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:39"
time="2023-08-28T22:06:45+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) RETURNING (segment_id, active)" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:24"
time="2023-08-28T22:06:45+03:00" level=error msg="SQL error: duplicate key value violates unique constraint \"segment_segment_name_key\", details: Key (segment_name)=(AVITO_SEG_TEST_1) already exists., where: , code: 23505, SQL-state: 23505" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:27"
time="2023-08-28T22:06:45+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) RETURNING (segment_id, active)" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:24"
time="2023-08-28T22:06:45+03:00" level=fatal msg="number of field descriptions must equal number of destinations, got 1 and 2" func="main.startRepositories()" file="app.go:49"
time="2023-08-28T22:17:41+03:00" level=info msg="create router" func="main.main()" file="app.go:24"
time="2023-08-28T22:17:41+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-28T22:17:41+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:39"
time="2023-08-28T22:17:41+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) RETURNING segment_id, active" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:24"
time="2023-08-28T22:17:41+03:00" level=error msg="SQL error: duplicate key value violates unique constraint \"segment_segment_name_key\", details: Key (segment_name)=(AVITO_SEG_TEST_1) already exists., where: , code: 23505, SQL-state: 23505" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:27"
time="2023-08-28T22:17:41+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) RETURNING segment_id, active" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:24"
time="2023-08-28T22:17:41+03:00" level=error msg="SQL error: duplicate key value violates unique constraint \"segment_segment_name_key\", details: Key (segment_name)=(AVITO_SEG_TEST_2) already exists., where: , code: 23505, SQL-state: 23505" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:27"
time="2023-08-28T22:17:41+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)RETURNING segment_id, in_date, out_date" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:67"
time="2023-08-28T22:17:41+03:00" level=fatal msg="can't scan into dest[0]: cannot assign 6 into int" func="main.startRepositories()" file="app.go:54"
time="2023-08-28T22:19:44+03:00" level=info msg="create router" func="main.main()" file="app.go:24"
time="2023-08-28T22:19:44+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-28T22:19:44+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:39"
time="2023-08-28T22:19:44+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) RETURNING segment_id, active" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:24"
time="2023-08-28T22:19:44+03:00" level=error msg="SQL error: duplicate key value violates unique constraint \"segment_segment_name_key\", details: Key (segment_name)=(AVITO_SEG_TEST_1) already exists., where: , code: 23505, SQL-state: 23505" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:27"
time="2023-08-28T22:19:44+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) RETURNING segment_id, active" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:24"
time="2023-08-28T22:19:44+03:00" level=error msg="SQL error: duplicate key value violates unique constraint \"segment_segment_name_key\", details: Key (segment_name)=(AVITO_SEG_TEST_2) already exists., where: , code: 23505, SQL-state: 23505" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:27"
time="2023-08-28T22:19:44+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)RETURNING segment_id, in_date" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:67"
time="2023-08-28T22:19:44+03:00" level=error msg="SQL error: duplicate key value violates unique constraint \"user_in_segment_pkey\", details: Key (user_id, segment_id)=(1000, 6) already exists., where: , code: 23505, SQL-state: 23505" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:70"
time="2023-08-28T22:19:44+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:22"
time="2023-08-28T22:19:44+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:19"
time="2023-08-28T22:19:44+03:00" level=info msg="start application" func="main.start()" file="app.go:67"
time="2023-08-28T22:19:44+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:69"
time="2023-08-28T22:19:44+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:81"
time="2023-08-29T13:05:41+03:00" level=info msg="create router" func="main.main()" file="app.go:30"
time="2023-08-29T13:05:41+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T13:05:41+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:45"
time="2023-08-29T13:05:41+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:23"
time="2023-08-29T13:05:41+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:31"
time="2023-08-29T13:05:41+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T13:05:41+03:00" level=info msg="start application" func="main.start()" file="app.go:76"
time="2023-08-29T13:05:41+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:78"
time="2023-08-29T13:05:41+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:90"
time="2023-08-29T13:07:11+03:00" level=info msg="create router" func="main.main()" file="app.go:30"
time="2023-08-29T13:07:11+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T13:07:11+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:45"
time="2023-08-29T13:07:11+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:23"
time="2023-08-29T13:07:11+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:31"
time="2023-08-29T13:07:11+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T13:07:11+03:00" level=info msg="start application" func="main.start()" file="app.go:76"
time="2023-08-29T13:07:11+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:78"
time="2023-08-29T13:07:11+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:90"
time="2023-08-29T13:08:32+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T13:08:32+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T13:08:32+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T13:08:32+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:23"
time="2023-08-29T13:08:32+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:31"
time="2023-08-29T13:08:32+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T13:08:32+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T13:08:32+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T13:08:32+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T13:24:55+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T13:24:55+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T13:24:55+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T13:24:55+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:25"
time="2023-08-29T13:24:55+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:33"
time="2023-08-29T13:24:55+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T13:24:55+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T13:24:55+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T13:24:55+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T13:25:13+03:00" level=info msg="geting list of segment for user with id 1000 started" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:46"
time="2023-08-29T13:25:13+03:00" level=trace msg="SQL query: SELECT segment_name FROM (SELECT segment_id AS s_id      FROM user_in_segment  WHERE user_id = $1    AND (out_date IS NULL             OR out_date < current_date)  ) AS active_u_segments    INNER JOIN segment ON s_id = segment.segment_id" func="AvitoTechTask/internal/userinsegment/db.repository.GetSegments()" file="postgres.go:110"
time="2023-08-29T13:25:13+03:00" level=error msg="got list of segments" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:60"
time="2023-08-29T13:28:09+03:00" level=info msg="geting list of segment for user with id 2 started" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:46"
time="2023-08-29T13:28:09+03:00" level=trace msg="SQL query: SELECT segment_name FROM (SELECT segment_id AS s_id      FROM user_in_segment  WHERE user_id = $1    AND (out_date IS NULL             OR out_date < current_date)  ) AS active_u_segments    INNER JOIN segment ON s_id = segment.segment_id" func="AvitoTechTask/internal/userinsegment/db.repository.GetSegments()" file="postgres.go:110"
time="2023-08-29T13:28:09+03:00" level=error msg="got list of segments" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:60"
time="2023-08-29T13:32:40+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T13:32:40+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T13:32:40+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T13:32:40+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:25"
time="2023-08-29T13:32:40+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:33"
time="2023-08-29T13:32:40+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T13:32:40+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T13:32:40+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T13:32:40+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T13:32:44+03:00" level=info msg="geting list of segment for user with id 1000 started" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:46"
time="2023-08-29T13:32:44+03:00" level=trace msg="SQL query: SELECT segment_name FROM (SELECT segment_id AS s_id      FROM user_in_segment  WHERE user_id = $1    AND (out_date IS NULL             OR out_date > current_date)  ) AS active_u_segments    INNER JOIN segment ON s_id = segment.segment_id" func="AvitoTechTask/internal/userinsegment/db.repository.GetSegments()" file="postgres.go:110"
time="2023-08-29T13:32:44+03:00" level=error msg="got list of segments" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:60"
time="2023-08-29T13:48:07+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T13:48:07+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T13:48:07+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T13:48:07+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:25"
time="2023-08-29T13:48:07+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:33"
time="2023-08-29T13:48:07+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T13:48:07+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T13:48:07+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T13:48:07+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T13:48:10+03:00" level=info msg="geting list of segment for user with id 1000 started" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:46"
time="2023-08-29T13:48:10+03:00" level=trace msg="SQL query: SELECT segment_name FROM (SELECT segment_id AS s_id      FROM user_in_segment  WHERE user_id = $1    AND (out_date IS NULL             OR out_date > current_date)  ) AS active_u_segments    INNER JOIN segment ON s_id = segment.segment_id" func="AvitoTechTask/internal/userinsegment/db.repository.GetSegments()" file="postgres.go:110"
time="2023-08-29T13:48:10+03:00" level=error msg="got list of segments" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:60"
time="2023-08-29T14:30:21+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T14:30:21+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T14:30:21+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T14:30:21+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:26"
time="2023-08-29T14:30:21+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:34"
time="2023-08-29T14:30:21+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T14:30:21+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T14:30:21+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T14:30:21+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T14:31:22+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T14:31:22+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T14:31:22+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T14:31:22+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:26"
time="2023-08-29T14:31:22+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:34"
time="2023-08-29T14:31:22+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T14:31:22+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T14:31:22+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T14:31:22+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T14:32:52+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T14:32:52+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T14:32:52+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T14:32:52+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:26"
time="2023-08-29T14:32:52+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:34"
time="2023-08-29T14:32:52+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T14:32:52+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T14:32:52+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T14:32:52+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T14:34:34+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T14:34:34+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T14:34:34+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T14:34:34+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:26"
time="2023-08-29T14:34:34+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:34"
time="2023-08-29T14:34:34+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T14:34:34+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T14:34:34+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T14:34:34+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T14:36:06+03:00" level=info msg="geting list of segment for user with id 1000 started" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:48"
time="2023-08-29T14:36:06+03:00" level=trace msg="SQL query: SELECT segment_name FROM (SELECT segment_id AS s_id      FROM user_in_segment  WHERE user_id = $1    AND (out_date IS NULL             OR out_date > current_date)  ) AS active_u_segments    INNER JOIN segment ON s_id = segment.segment_id" func="AvitoTechTask/internal/userinsegment/db.repository.GetSegments()" file="postgres.go:105"
time="2023-08-29T14:36:06+03:00" level=error msg="got list of segments" func="AvitoTechTask/internal/userinsegment.(*handler).GetListOfSegments()" file="handler.go:62"
time="2023-08-29T14:36:53+03:00" level=error msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:95"
time="2023-08-29T14:36:53+03:00" level=error msg="Invalid request body" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:100"
time="2023-08-29T14:37:15+03:00" level=error msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:95"
time="2023-08-29T14:37:15+03:00" level=error msg="Invalid request body" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:100"
time="2023-08-29T14:40:33+03:00" level=error msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:95"
time="2023-08-29T14:40:33+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T14:40:33+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T14:44:11+03:00" level=error msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:95"
time="2023-08-29T14:44:11+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T14:44:11+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T14:47:24+03:00" level=error msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:95"
time="2023-08-29T14:47:24+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T14:54:41+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T14:54:41+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T14:54:41+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T14:54:41+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:26"
time="2023-08-29T14:54:41+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:34"
time="2023-08-29T14:54:41+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T14:54:41+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T14:54:41+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T14:54:41+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T14:54:54+03:00" level=info msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:95"
time="2023-08-29T14:54:54+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T15:00:31+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T15:00:31+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T15:00:31+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T15:00:31+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:26"
time="2023-08-29T15:00:31+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:34"
time="2023-08-29T15:00:31+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T15:00:31+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T15:00:31+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T15:00:31+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T15:00:36+03:00" level=info msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:95"
time="2023-08-29T15:00:36+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, null,        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T15:21:43+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T15:21:43+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T15:21:43+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T15:21:43+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T15:21:43+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T15:21:43+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T15:21:43+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T15:21:43+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T15:21:43+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T15:21:51+03:00" level=info msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:96"
time="2023-08-29T15:21:51+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T15:23:13+03:00" level=info msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:96"
time="2023-08-29T15:23:13+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T15:23:13+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T15:23:43+03:00" level=info msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:96"
time="2023-08-29T15:23:43+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, DEFAULT)" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegments()" file="postgres.go:66"
time="2023-08-29T15:26:08+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T15:26:08+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T15:26:08+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T15:26:08+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T15:26:08+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T15:26:08+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T15:26:08+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T15:26:08+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T15:26:08+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T15:26:11+03:00" level=info msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:96"
time="2023-08-29T15:28:53+03:00" level=info msg="start add-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:96"
time="2023-08-29T18:33:02+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T18:33:02+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T18:33:02+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T18:33:02+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T18:33:02+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T18:33:02+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T18:33:02+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T18:33:02+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T18:33:02+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T18:33:34+03:00" level=info msg="start add-user-segments without period" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:113"
time="2023-08-29T18:34:27+03:00" level=info msg="start add-user-segments without period" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:113"
time="2023-08-29T18:34:57+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T18:34:57+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T18:34:57+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T18:34:57+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T18:34:57+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T18:34:57+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T18:34:57+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T18:34:57+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T18:34:57+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T18:35:02+03:00" level=info msg="start add-user-segments with period" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:107"
time="2023-08-29T18:35:32+03:00" level=info msg="start add-user-segments with period" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:107"
time="2023-08-29T18:35:57+03:00" level=info msg="start add-user-segments without period" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:113"
time="2023-08-29T18:36:52+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T18:36:52+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T18:36:52+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T18:36:52+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:28"
time="2023-08-29T18:36:52+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:36"
time="2023-08-29T18:36:52+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T18:36:52+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T18:36:52+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T18:36:52+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T18:36:54+03:00" level=info msg="start add-user-segments without period" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:117"
time="2023-08-29T18:37:33+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T18:37:33+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T18:37:33+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T18:37:33+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:28"
time="2023-08-29T18:37:33+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:36"
time="2023-08-29T18:37:33+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T18:37:33+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T18:37:33+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T18:37:33+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T18:37:35+03:00" level=info msg="start add-user-segments without period" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:117"
time="2023-08-29T18:38:10+03:00" level=info msg="start add-user-segments with period" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:111"
time="2023-08-29T18:41:14+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T18:41:14+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T18:41:14+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T18:41:14+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T18:41:14+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T18:41:14+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T18:41:14+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T18:41:14+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T18:41:14+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T18:41:18+03:00" level=info msg="start add-user-segments with period" func="AvitoTechTask/internal/userinsegment.(*handler).AddUserSegments()" file="handler.go:105"
time="2023-08-29T18:41:18+03:00" level=trace msg="SQL query: INSERT INTO user_in_segment    (user_id, segment_id, in_date, out_date)VALUES ($1, (SElECT segment_id FROM segment WHERE segment_name = $2),        current_timestamp, current_timestamp + $3 * (interval '1 day'))" func="AvitoTechTask/internal/userinsegment/db.repository.AddSegmentsWithPeriod()" file="postgres.go:87"
time="2023-08-29T18:52:08+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T18:52:08+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T18:52:08+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T18:52:08+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T18:52:08+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T18:52:08+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T18:52:08+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T18:52:08+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T18:52:08+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T18:53:39+03:00" level=info msg="start delete-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).DeleteListOfSegments()" file="handler.go:78"
time="2023-08-29T18:53:39+03:00" level=trace msg="SQL query: UPDATE user_in_segment SET out_date = current_timestamp        WHERE user_id = $1 AND               segment_id = (SELECT segment_id                              FROM segment                              WHERE segment_name = $2)" func="AvitoTechTask/internal/userinsegment/db.repository.DeleteFromSegment()" file="postgres.go:47"
time="2023-08-29T18:58:48+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T18:58:48+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T18:58:48+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T18:58:48+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T18:58:48+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T18:58:48+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T18:58:48+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T18:58:48+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T18:58:48+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T18:58:51+03:00" level=info msg="start delete-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).DeleteListOfSegments()" file="handler.go:78"
time="2023-08-29T18:58:51+03:00" level=trace msg="SQL query: UPDATE user_in_segment SET out_date = current_timestamp        WHERE user_id = $1 AND               segment_id = (SELECT segment_id                              FROM segment                              WHERE segment_name = $2)" func="AvitoTechTask/internal/userinsegment/db.repository.DeleteFromSegment()" file="postgres.go:47"
time="2023-08-29T19:00:08+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:00:08+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:00:08+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:00:08+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:00:08+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:00:08+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T19:00:08+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:00:08+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:00:08+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:00:10+03:00" level=info msg="start delete-user-segments" func="AvitoTechTask/internal/userinsegment.(*handler).DeleteListOfSegments()" file="handler.go:78"
time="2023-08-29T19:00:10+03:00" level=trace msg="SQL query: UPDATE user_in_segment SET out_date = current_timestamp        WHERE user_id = $1 AND               segment_id = (SELECT segment_id                              FROM segment                              WHERE segment_name = $2)" func="AvitoTechTask/internal/userinsegment/db.repository.DeleteFromSegment()" file="postgres.go:47"
time="2023-08-29T19:05:06+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:05:06+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:05:06+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:05:06+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:05:06+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:05:06+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T19:05:06+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:05:06+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:05:06+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:05:31+03:00" level=info msg="there is segment_name: \"TEST_1M\"" func="AvitoTechTask/internal/segment.(*handler).CreateSegment()" file="handler.go:44"
time="2023-08-29T19:05:31+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) RETURNING segment_id, active" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:31"
time="2023-08-29T19:05:40+03:00" level=info msg="there is segment_name: TEST_1M" func="AvitoTechTask/internal/segment.(*handler).CreateSegment()" file="handler.go:44"
time="2023-08-29T19:05:40+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) RETURNING segment_id, active" func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:31"
time="2023-08-29T19:07:43+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:07:43+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:07:43+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:07:43+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:07:43+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:07:43+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T19:07:43+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:07:43+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:07:43+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:08:03+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:08:03+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:08:03+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:08:03+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:08:03+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:08:03+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T19:08:03+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:08:03+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:08:03+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:08:08+03:00" level=info msg="there is segment_name: TEST_1M" func="AvitoTechTask/internal/segment.(*handler).CreateSegment()" file="handler.go:44"
time="2023-08-29T19:08:08+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) " func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:30"
time="2023-08-29T19:08:28+03:00" level=info msg="there is segment_name: TEST_2M" func="AvitoTechTask/internal/segment.(*handler).CreateSegment()" file="handler.go:44"
time="2023-08-29T19:08:28+03:00" level=trace msg="SQL query: INSERT INTO segment     (segment_name)VALUES ($1) " func="AvitoTechTask/internal/segment/db.(*repository).Create()" file="postgres.go:30"
time="2023-08-29T19:16:36+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:16:36+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:16:36+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:16:36+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:16:36+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:16:36+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:21"
time="2023-08-29T19:16:36+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:16:36+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:16:36+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:17:12+03:00" level=info msg="start delete-segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:43"
time="2023-08-29T19:17:12+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = $1RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:53"
time="2023-08-29T19:17:12+03:00" level=error msg="no rows in result set : something wrong with deleting user from segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:46"
time="2023-08-29T19:18:45+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:18:45+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:18:45+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:18:45+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:18:45+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:18:45+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:21"
time="2023-08-29T19:18:45+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:18:45+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:18:45+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:18:54+03:00" level=info msg="start delete-segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:43"
time="2023-08-29T19:18:54+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = $1RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:53"
time="2023-08-29T19:18:54+03:00" level=error msg="no rows in result set : something wrong with deleting user from segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:46"
time="2023-08-29T19:19:59+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:19:59+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:19:59+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:19:59+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:19:59+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:19:59+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:21"
time="2023-08-29T19:19:59+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:19:59+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:19:59+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:20:00+03:00" level=info msg="start delete-segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:43"
time="2023-08-29T19:20:00+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = $1RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:54"
time="2023-08-29T19:20:00+03:00" level=error msg="no rows in result set : something wrong with deleting user from segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:46"
time="2023-08-29T19:25:37+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:25:37+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:25:37+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:25:37+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:25:37+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:25:37+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:21"
time="2023-08-29T19:25:37+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:25:37+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:25:37+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:25:39+03:00" level=info msg="start delete-segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:43"
time="2023-08-29T19:25:39+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = $1RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:54"
time="2023-08-29T19:25:39+03:00" level=error msg="no rows in result set : something wrong with deleting user from segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:46"
time="2023-08-29T19:26:05+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:26:05+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:26:05+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:26:05+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:26:05+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:26:05+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:21"
time="2023-08-29T19:26:05+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:26:05+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:26:05+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:26:07+03:00" level=info msg="start delete-segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:43"
time="2023-08-29T19:26:07+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = $1RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:54"
time="2023-08-29T19:26:07+03:00" level=error msg="no rows in result set : something wrong with deleting user from segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:46"
time="2023-08-29T19:29:48+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T19:29:48+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T19:29:48+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T19:29:48+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T19:29:48+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T19:29:48+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:21"
time="2023-08-29T19:29:48+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T19:29:48+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T19:29:48+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T19:29:51+03:00" level=info msg="start delete-segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:43"
time="2023-08-29T19:29:51+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = $1RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:54"
time="2023-08-29T19:29:51+03:00" level=error msg="no rows in result set : something wrong with deleting user from segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:46"
time="2023-08-29T20:48:54+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T20:48:54+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T20:48:54+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T20:48:54+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T20:48:54+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T20:48:54+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:21"
time="2023-08-29T20:48:54+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T20:48:54+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T20:48:54+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T20:48:56+03:00" level=info msg="start delete-segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:43"
time="2023-08-29T20:48:56+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = 'AVITO_3'RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:54"
time="2023-08-29T20:48:56+03:00" level=error msg="expected 0 arguments, got 1 : something wrong with deleting user from segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:46"
time="2023-08-29T20:49:18+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T20:49:18+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T20:49:18+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T20:49:18+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T20:49:18+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T20:49:18+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:21"
time="2023-08-29T20:49:18+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T20:49:18+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T20:49:18+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T20:49:20+03:00" level=info msg="start delete-segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:43"
time="2023-08-29T20:49:20+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = 'AVITO_3'RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:54"
time="2023-08-29T20:49:20+03:00" level=trace msg="SQL query: UPDATE user_in_segmentSET out_date = current_timestampWHERE segment_id = $1" func="AvitoTechTask/internal/segment/db.(*repository).deleteFromUsers()" file="postgres.go:73"
time="2023-08-29T20:50:30+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T20:50:30+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T20:50:30+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T20:50:30+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T20:50:30+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T20:50:30+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:21"
time="2023-08-29T20:50:30+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T20:50:30+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T20:50:30+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T20:50:37+03:00" level=info msg="start delete-segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:43"
time="2023-08-29T20:50:37+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = $1RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:54"
time="2023-08-29T20:50:37+03:00" level=error msg="no rows in result set : something wrong with deleting user from segment" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:46"
time="2023-08-29T20:55:14+03:00" level=info msg="create router" func="main.main()" file="app.go:33"
time="2023-08-29T20:55:14+03:00" level=info msg="create and get instance of configuration object" func="AvitoTechTask/internal/configuration.GetConfig.func1()" file="config.go:30"
time="2023-08-29T20:55:14+03:00" level=info msg="postgres client successfully connected" func="main.startRepositories()" file="app.go:48"
time="2023-08-29T20:55:14+03:00" level=info msg="register user handler" func="AvitoTechTask/internal/userinsegment.NewHandler()" file="handler.go:27"
time="2023-08-29T20:55:14+03:00" level=info msg="register user handler methods" func="AvitoTechTask/internal/userinsegment.(*handler).Register()" file="handler.go:35"
time="2023-08-29T20:55:14+03:00" level=info msg="register segment handler" func="AvitoTechTask/internal/segment.NewHandler()" file="handler.go:20"
time="2023-08-29T20:55:14+03:00" level=info msg="start application" func="main.start()" file="app.go:79"
time="2023-08-29T20:55:14+03:00" level=info msg="listen tcp" func="main.start()" file="app.go:81"
time="2023-08-29T20:55:14+03:00" level=info msg="server is listening port %s:%s0.0.0.01234" func="main.start()" file="app.go:93"
time="2023-08-29T20:55:16+03:00" level=info msg="segment segment_name: AVITO_1 is deleting" func="AvitoTechTask/internal/segment.(*handler).DeleteSegment()" file="handler.go:39"
time="2023-08-29T20:55:16+03:00" level=trace msg="SQL query: UPDATE segment SET active = false WHERE segment_name = $1RETURNING segment_id" func="AvitoTechTask/internal/segment/db.(*repository).Delete()" file="postgres.go:54"
time="2023-08-29T20:55:16+03:00" level=trace msg="SQL query: UPDATE user_in_segmentSET out_date = current_timestampWHERE segment_id = $1" func="AvitoTechTask/internal/segment/db.(*repository).deleteFromUsers()" file="postgres.go:72"
